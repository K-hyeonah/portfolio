<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>μ£Όλ¬Έ μƒμ„Έ - GreenHub</title>
    <link rel="stylesheet" href="/css/header.css">
    <link rel="stylesheet" href="/css/orderdetails.css">
    <link rel="stylesheet" href="/css/footer.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
</head>
<body>
<!-- ν—¤λ” include -->
<div th:replace="common/header :: header"></div>

<!-- λ©”μΈ μ½ν…μΈ  -->
<main class="main-content">
    <div class="page-title-section">
        <h1 class="page-title">μ£Όλ¬Έ μƒμ„Έ</h1>
        <p class="page-subtitle">μ£Όλ¬Έν•μ‹  μƒν’μ μƒμ„Έ μ •λ³΄λ¥Ό ν™•μΈν•μ‹¤ μ μμµλ‹λ‹¤</p>
    </div>

    <div class="order-info-card">
        <div class="order-header">
            <div class="order-basic-info">
                <h2 class="order-number" id="orderNumber">μ£Όλ¬Έλ²νΈ: -</h2>
                <div class="order-date" id="orderDate">μ£Όλ¬ΈμΌ: -</div>
            </div>
            <div class="order-status" id="orderStatus">
                <span class="status-badge">-</span>
            </div>
        </div>
    </div>

    <div class="order-items-section">
        <h3 class="section-title">μ£Όλ¬Έ μƒν’</h3>
        <div class="order-items-list" id="orderItemsList"></div>
    </div>

    <div class="delivery-info-section">
        <h3 class="section-title">λ°°μ†΅ μ •λ³΄</h3>
        <div class="delivery-info-card">
            <div class="delivery-address">
                <div class="info-row"><span class="info-label">λ°›λ” λ¶„</span><span class="info-value" id="recipientName">-</span></div>
                <div class="info-row"><span class="info-label">μ—°λ½μ²</span><span class="info-value" id="recipientPhone">-</span></div>
                <div class="info-row"><span class="info-label">λ°°μ†΅ μ£Όμ†</span><span class="info-value" id="deliveryAddress">-</span></div>
                <div class="info-row"><span class="info-label">λ°°μ†΅ μ”μ²­μ‚¬ν•­</span><span class="info-value" id="deliveryNote">-</span></div>
            </div>
            <div class="delivery-tracking" id="deliveryTracking">
                <h4>λ°°μ†΅ μ¶”μ </h4>
                <div class="tracking-timeline">
                    <div class="tracking-step completed">
                        <div class="step-icon">π“¦</div>
                        <div class="step-content">
                            <div class="step-title">μ£Όλ¬Έ μ ‘μ</div>
                            <div class="step-date">2024-01-15 14:30</div>
                        </div>
                    </div>
                    <div class="tracking-step completed">
                        <div class="step-icon">π­</div>
                        <div class="step-content">
                            <div class="step-title">μƒν’ μ¤€λΉ„</div>
                            <div class="step-date">2024-01-16 09:15</div>
                        </div>
                    </div>
                    <div class="tracking-step completed">
                        <div class="step-icon">π</div>
                        <div class="step-content">
                            <div class="step-title">λ°°μ†΅ μ‹μ‘</div>
                            <div class="step-date">2024-01-17 08:00</div>
                        </div>
                    </div>
                    <div class="tracking-step completed">
                        <div class="step-icon">β…</div>
                        <div class="step-content">
                            <div class="step-title">λ°°μ†΅ μ™„λ£</div>
                            <div class="step-date">2024-01-17 15:30</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="payment-info-section">
        <h3 class="section-title">κ²°μ  μ •λ³΄</h3>
        <div class="payment-info-card">
            <div class="payment-method">
                <div class="info-row"><span class="info-label">κ²°μ  λ°©λ²•</span><span class="info-value" id="paymentMethod">-</span></div>
                <div class="info-row"><span class="info-label">κ²°μ  μΌμ‹</span><span class="info-value" id="paymentDate">-</span></div>
                <div class="info-row"><span class="info-label">μΉμΈ λ²νΈ</span><span class="info-value" id="approvalNumber">-</span></div>
            </div>
            <div class="payment-summary">
                <div class="summary-row"><span class="summary-label">μƒν’ κΈμ•΅</span><span class="summary-value" id="productAmount">-</span></div>
                <div class="summary-row"><span class="summary-label">λ°°μ†΅λΉ„</span><span class="summary-value" id="shippingFee">-</span></div>
                <div class="summary-row discount"><span class="summary-label">ν• μΈ κΈμ•΅</span><span class="summary-value" id="discountAmount">-</span></div>
                <div class="summary-row total"><span class="summary-label">μ΄ κ²°μ  κΈμ•΅</span><span class="summary-value" id="totalAmount">-</span></div>
            </div>
        </div>
    </div>

    <div class="action-buttons-section">
        <div class="action-buttons" id="actionButtons">
            <button class="action-btn btn-secondary" onclick="window.location.href='/orderhistory'">μ£Όλ¬Έ λ‚΄μ—­μΌλ΅ λμ•„κ°€κΈ°</button>
            <button class="action-btn btn-primary" onclick="showReceipt()">μμμ¦ λ³΄κΈ°</button>
            <button class="action-btn btn-outline" onclick="reorder()">μ¬μ£Όλ¬Έ</button>
            <button class="action-btn btn-outline" onclick="writeReview()">λ¦¬λ·° μ‘μ„±</button>
            <button class="action-btn btn-warning" onclick="requestReturnExchange()" id="returnExchangeBtn" style="display: none;">λ°ν’/κµν™μ‹ μ²­</button>
        </div>
    </div>
</main>

<!-- μμμ¦ λ¨λ‹¬ -->
<div class="receipt-modal" id="receiptModal">
    <div class="receipt-modal-content">
        <div class="receipt-header">
            <h2>μμμ¦</h2>
            <button class="close-btn" onclick="closeReceipt()">&times;</button>
        </div>
        <div class="receipt-body" id="receiptBody"></div>
        <div class="receipt-footer">
            <button class="btn-secondary" onclick="closeReceipt()">λ‹«κΈ°</button>
            <button class="btn-primary" onclick="downloadReceipt()">λ‹¤μ΄λ΅λ“</button>
        </div>
    </div>
</div>

<!-- ν‘Έν„° include -->
<div th:replace="common/footer :: footer"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="/js/shoppinglist.js"></script>
<script src="/js/orderdetails.js"></script>
</body>
</html>
