<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>μ¥λ°”κµ¬λ‹ - GreenHub</title>
    <link rel="stylesheet" href="/css/header.css">
    <link rel="stylesheet" href="/css/shoppinglist.css">
    <link rel="stylesheet" href="/css/footer.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
</head>
<body>
<!-- ν—¤λ” include -->
<div th:replace="~{common/header :: header}"></div>

<!-- μ¥λ°”κµ¬λ‹ λ©”μΈ μ»¨ν…μΈ  -->
<section class="shoppinglist-section">
    <div class="container">
        <!-- μ¥λ°”κµ¬λ‹ μ μ–΄ λ²„νΌ (μ¥λ°”κµ¬λ‹μ— μƒν’μ΄ μμ„ λ•λ§ ν‘μ‹) -->
        <div class="cart-controls" th:if="${!#lists.isEmpty(cartItems)}">
            <div class="select-all">
                <input type="checkbox" id="selectAll" class="select-all-checkbox">
                <label for="selectAll" class="select-all-label">μ „μ²΄μ„ νƒ</label>
            </div>
            <button class="delete-selected-btn" id="deleteSelected">
                <span class="delete-count">0</span> μ„ νƒμ‚­μ 
            </button>
        </div>

        <!-- μ¥λ°”κµ¬λ‹ μƒν’ λ©λ΅ -->
        <div class="cart-items">
            <!-- μ¥λ°”κµ¬λ‹κ°€ λΉ„μ–΄μμ„ λ• -->
            <div class="empty-cart" th:if="${#lists.isEmpty(cartItems)}">
                <div class="empty-cart-content">
                    <img src="/images/λ”°λ΄‰ νΈλ­.png" alt="λΉ μ¥λ°”κµ¬λ‹" class="empty-cart-icon">
                    <h3>μ¥λ°”κµ¬λ‹κ°€ λΉ„μ–΄μμµλ‹λ‹¤</h3>
                    <p>μ›ν•λ” μƒν’μ„ μ¥λ°”κµ¬λ‹μ— λ‹΄μ•„λ³΄μ„Έμ”!</p>
                    <a href="/region" class="go-shopping-btn">μ‡Όν•‘ν•λ¬ κ°€κΈ°</a>
                </div>
            </div>

            <!-- μ¥λ°”κµ¬λ‹ μƒν’ λ©λ΅ (DB λ°μ΄ν„°) -->
            <div class="cart-item" th:each="cartItem : ${cartItems}" 
                 th:data-cart-id="${cartItem.cartId}"
                 th:data-option-id="${cartItem.optionId}">
                <div class="item-checkbox">
                    <input type="checkbox" class="item-check" th:data-cart-id="${cartItem.cartId}">
                </div>
                <div class="item-info">
                    <div class="seller-info">
                        <span class="seller-icon">π </span>
                        <span class="seller-name">λ†κ°€</span>
                    </div>
                    <div class="product-details">
                        <img src="/images/λ”°λ΄‰ νΈλ­.png" alt="μƒν’ μ΄λ―Έμ§€" class="product-image">
                        <div class="product-info">
                            <h3 class="product-name" th:text="${cartItem.optionName}">μƒν’λ…</h3>
                            <p class="product-description">μ‹ μ„ ν• λ†μ‚°λ¬Όμ…λ‹λ‹¤.</p>
                            <div class="product-price" th:text="${#numbers.formatInteger(cartItem.unitPrice, 0)} + 'μ›/' + ${cartItem.unit}">κ°€κ²©</div>
                            <div class="product-origin">
                                <span class="origin-badge">λ†κ°€ μ§κ±°λ</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="item-quantity">
                    <div class="quantity-info">
                        <span class="quantity-label">μƒν’ μ£Όλ¬Έμλ‰ :</span>
                        <span class="quantity-value" th:text="${cartItem.quantity} + ${cartItem.unit}">μλ‰</span>
                    </div>
                    <button class="modify-order-btn" th:data-cart-id="${cartItem.cartId}">μ£Όλ¬Έμμ •</button>
                </div>
                <div class="item-total">
                    <div class="total-price">
                        <span class="price-label">μƒν’ κΈμ•΅</span>
                        <span class="price-value" th:text="${#numbers.formatInteger(cartItem.totalPrice, 0)} + 'μ›'">μ΄μ•΅</span>
                    </div>
                    <button class="order-btn" onclick="window.orderItem('${item.cartId}')">μ£Όλ¬Έν•κΈ°</button>
                </div>
            </div>
        </div>

        <!-- μ¥λ°”κµ¬λ‹ μ•λ‚΄μ‚¬ν•­ -->
        <div class="cart-notice">
            <ul class="notice-list">
                <li>μ¥λ°”κµ¬λ‹ μƒν’μ€ μµλ€ 90μΌκ°„ μ €μ¥λ©λ‹λ‹¤.</li>
                <li>μ¥λ°”κµ¬λ‹μ— λ‹΄κΈ΄ μƒν’μ€ μµμ… λλ” μ¶”κ°€μƒν’ λ‹¨μ„λ΅ μµλ€ 10κ°μ μƒν’λ§ λ™μ‹ μ£Όλ¬Έν•  μ μμµλ‹λ‹¤.</li>
                <li>κ°€κ²©, μµμ… λ“± μ •λ³΄κ°€ λ³€κ²½λ κ²½μ° μ£Όλ¬Έμ΄ λ¶κ°€ν•  μ μμµλ‹λ‹¤.</li>
                <li>μ¤λμ¶λ° μ •λ³΄λ” νλ§¤μκ°€ μ„¤μ •ν• μ •λ³΄μ— μν•΄ μ κ³µλλ©°, λ¬Όλ¥μ„νƒ μƒν’μΈ κ²½μ° λ¬Όλ¥μ‚¬μ μ‚¬μ •μ— λ”°λΌ μ‹¤μ μ™€ λ‹¤λ¥Ό μ μμµλ‹λ‹¤.</li>
                <li>μΌλ¶€ μƒν’μ κ²½μ° μΉ΄λ“ ν• λ¶€κΈ°κ°„μ΄ μΉ΄λ“μ‚¬ μ κ³µ κΈ°κ°„λ³΄λ‹¤ μ κ² μ κ³µλ  μ μμµλ‹λ‹¤.</li>
                <li>μ¥λ°”κµ¬λ‹μ— λ³΄μ—¬μ§€λ” λ°°μ†΅λΉ„λ” μµμΆ…μ μΌλ΅ λ°μƒν•λ” λ°°μ†΅λΉ„κ°€ μ•„λ‹λ©°, μ£Όλ¬Έ μ£Όμ†μ§€μ— λ”°λΌ λ„μ„μ‚°κ°„ λΉ„μ© λ“±μ΄ μ¶”κ°€ λ°μƒν•  μ μμµλ‹λ‹¤.</li>
            </ul>
        </div>

        <!-- μ£Όλ¬Έ μ”μ•½ -->
        <div class="order-summary">
            <div class="summary-info">
                <span class="total-items">μ΄ <span id="totalItems">0</span>κ±΄</span>
                <span class="total-amount">μ£Όλ¬ΈκΈμ•΅ <span id="totalAmount">0</span>μ›</span>
            </div>
            <button class="final-order-btn" id="finalOrderBtn">μ£Όλ¬Έν•κΈ°</button>
        </div>
    </div>
</section>

<!-- ν‘Έν„° include -->
<div th:replace="common/footer :: footer"></div>

<script src="/js/shoppinglist.js"></script>
</body>
</html>
