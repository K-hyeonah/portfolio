<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>농산물 - GreenHub</title>
    <link rel="stylesheet" th:href="@{/css/header.css}">
    <link rel="stylesheet" th:href="@{/css/main.css}">
    <link rel="stylesheet" th:href="@{/css/footer.css}">
    <link rel="stylesheet" th:href="@{/css/recommend-modal.css}">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
</head>
<body>
<!-- 헤더 include -->
<div th:replace="common/header :: header"></div>

<!-- 메인 배너 -->
<section class="main-banner">
    <div class="banner-content">
        <video autoplay muted loop class="banner-video">
            <source src="/videos/쌀.mp4" type="video/mp4">
            <img src="/images/쌀.jpg" alt="쌀밭 배너" class="banner-image">
        </video>
    </div>
</section>

<!-- 메인 컨텐츠 (검색바 + 카테고리 + 추천 요리) -->
<section class="main-content-section">
    <div class="container">
        <div class="content-wrapper">
            <!-- 왼쪽: 검색바, 상품 카테고리, 오늘 뭐먹지? -->
            <div class="left-content">
                <!-- 검색바 -->
                <div class="search-section">
                    <div class="search-bar">
                        <input type="text" placeholder="검색어를 입력하세요" class="search-input">
                        <button class="search-btn">
                            <img src="/images/돋보기 아이콘.png" alt="검색" class="search-icon">
                        </button>
                    </div>
                </div>

                <!-- 상품 카테고리 -->
                <div class="categories-section">
                    <div class="category-row">
                        <div class="category-item">
                            <img src="/images/사과.jpg" alt="농산물" class="category-image">
                            <span class="category-label">농산물</span>
                        </div>
                        <div class="category-item">
                            <img src="/images/고기.webp" alt="축산물" class="category-image">
                            <span class="category-label">축산물</span>
                        </div>
                        <div class="category-item">
                            <img src="/images/생선.jpg" alt="수산물" class="category-image">
                            <span class="category-label">수산물</span>
                        </div>
                        <div class="category-item">
                            <img src="/images/가공식품.webp" alt="가공식품" class="category-image">
                            <span class="category-label">가공식품</span>
                        </div>
                    </div>
                </div>

                <!-- 오늘 뭐먹지? 섹션 -->
                <div class="what-to-eat-section">
                    <div class="what-to-eat-box">
                        <h3 class="what-to-eat-title">오늘 뭐먹지?</h3>
                        <p class="what-to-eat-description">전국 지역 특산품으로 만드는 특별한 레시피를 추천해드립니다.</p>
                        <button class="what-to-eat-btn" id="recommend-btn">추천받기</button>
                    </div>
                </div>
            </div>

            <!-- 오른쪽: 오늘의 추천 특산품 요리 -->
            <div class="recommended-recipe">
                <h3 class="recipe-title">오늘의 추천 특산품 요리</h3>
                <div class="recipe-content">
                    <img src="/images/요리.jpg" alt="전복무스비" class="recipe-image">
                    <div class="recipe-info">
                        <h4 class="recipe-name">전복무스비</h4>
                        <p class="recipe-description">완도산 전복을 메인으로 활용한 요리!</p>
                        <p class="recipe-subtitle">간단하게 만들 수 있어서 인기만점</p>
                        <p class="recipe-subtitle">아이들도 잘 먹는 요리!</p>
                        <p class="recipe-subtitle">같이 한 번 만들어봐요~~~</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- 제철상품 섹션 -->
<section class="seasonal-products">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">제철상품 왔어요</h2>
            <div class="truck-icon">
                <img src="/images/그냥 트럭.png" alt="트럭" class="truck-img">
                <img src="/images/뿡뿡 아이콘.png" alt="뿡뿡" class="truck-sound">
                <img src="/images/뿡뿡 아이콘.png" alt="뿡뿡" class="truck-sound">
                <img src="/images/뿡뿡 아이콘.png" alt="뿡뿡" class="truck-sound">
            </div>
        </div>

        <div class="products-grid">
            <!-- 없을 때 안내 -->
            <div class="product-empty" th:if="${#lists.isEmpty(seasonalProducts)}">
                이번 달 제철 상품을 준비 중입니다.
            </div>

            <!-- 있을 때 카드 렌더 -->
            <a class="product-item"
               th:each="p : ${seasonalProducts}"
               th:href="@{/region-detail(id=${p.productId}, region=${p.regionText})}"
               th:with="img=${#strings.trim(p.thumbnailUrl)}">

                <div class="product-image">
                    <img
                            th:src="${#strings.isEmpty(img) or img.toLowerCase() == 'null' ? '/images/따봉 트럭.png' : img}"
                            th:alt="${p.productName}"
                            loading="lazy"
                            onerror="this.onerror=null;this.src='/images/따봉 트럭.png';" />
                </div>

                <div class="product-info">
                    <div class="product-catchphrase" th:text="${p.productType}">카테고리</div>
                    <span class="season-badge">[지금이 제철]</span>
                    <h4 class="product-name" th:text="${p.productName}">상품명</h4>
                    <p class="product-description" th:text="${p.regionText}">지역</p>
                    <p class="product-subtitle" th:text="|제철: ${p.harvestSeason}|">제철기간</p>
                    <p class="product-action">지금 만나보세요</p>
                </div>
            </a>

        </div>


    </div>
</section>



<!-- 요리법 섹션 -->
<section class="recipes-section">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">다양한 요리법 왔어요</h2>
            <div class="truck-icon">
                <img src="/images/그냥 트럭.png" alt="트럭" class="truck-img">
                <img src="/images/뿡뿡 아이콘.png" alt="뿡뿡" class="truck-sound">
                <img src="/images/뿡뿡 아이콘.png" alt="뿡뿡" class="truck-sound">
                <img src="/images/뿡뿡 아이콘.png" alt="뿡뿡" class="truck-sound">
            </div>
        </div>
        <!-- 기존 하드코딩 대신 -->
        <div class="recipes-grid">
            <div th:each="recipe : ${randomRecipes}" class="recipe-item" th:onclick="|location.href='/recipe/detail?id=${recipe.recipeId}'|" style="cursor: pointer;">
                <img th:src="${recipe.heroImageUrl != null and !#strings.isEmpty(recipe.heroImageUrl) ? recipe.heroImageUrl : '/images/고기 트럭.png'}" 
                     th:alt="${recipe.title}" 
                     class="recipe-image"
                     th:onerror="|this.onerror=null;this.src='@{/images/고기 트럭.png}'|">
                <div class="recipe-info">
                    <h4 class="recipe-name" th:text="${recipe.title}">레시피 제목</h4>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- 푸터 include -->
<div th:replace="common/footer :: footer"></div>

<script src="/js/main.js"></script>
</body>
</html>