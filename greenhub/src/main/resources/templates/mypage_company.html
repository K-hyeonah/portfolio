<!-- src/main/resources/templates/mypage_company.html -->
<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>μ—…μ²΄ λ§μ΄νμ΄μ§€ - GreenHub</title>

    <!-- κΈ°μ΅΄ κ³µμ© CSS -->
    <link rel="stylesheet" th:href="@{/css/header.css}" />
    <link rel="stylesheet" th:href="@{/css/mypage_company.css}" />
    <link rel="stylesheet" th:href="@{/css/footer.css}" />
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet" />

</head>
<body>
<!-- ν—¤λ” -->
<div th:replace="~{common/header :: header}"></div>

<!-- μ—…μ²΄ λ§μ΄νμ΄μ§€ -->
<section class="mypage-company-section">
    <div class="container">
        <!-- νƒ€μ΄ν‹€ -->
        <div class="mypage-title">
            <div class="page-title-container">
                <div class="page-icon">
                    <!-- μ•„μ΄μ½ κ³ μ • (μ›ν•μ‹λ©΄ μ΄λ―Έμ§€λ΅ λ°”κΏ”λ„ λ©λ‹λ‹¤) -->
                    <span class="store-icon">π</span>
                </div>
                <div>
                    <h1 class="page-title">μ—…μ²΄ λ§μ΄νμ΄μ§€</h1>
                    <p class="page-description">μ—…μ²΄ μ •λ³΄μ™€ μ£Όλ¬Έ κ΄€λ¦¬λ¥Ό ν•  μ μμµλ‹λ‹¤.</p>
                </div>
            </div>
        </div>

        <!-- μ—…μ²΄ μ •λ³΄ -->
        <div class="company-info-section">
            <div class="company-profile">
                <div class="company-avatar">
                    <span class="avatar-text" th:text="${comp != null ? comp.companyName : 'μ—…μ²΄λ…'}"></span>
                </div>

                <div class="company-details">
                    <h2 class="company-name" th:text="${comp != null ? comp.companyName : 'μ—…μ²΄λ…'}">μ—…μ²΄λ…</h2>

                    <div class="company-info-item">
                        <span class="info-icon">π“§</span>
                        <span class="info-text" th:text="${comp != null ? comp.email : 'example@greenhub.com'}">example@greenhub.com</span>
                    </div>

                    <div class="company-info-item">
                        <span class="info-icon">π“±</span>
                        <span class="info-text" th:text="${comp != null ? comp.managerPhone : '010-0000-0000'}">010-0000-0000</span>
                    </div>

                    <div class="company-info-item">
                        <span class="info-icon">π </span>
                        <span class="info-text" th:text="${comp != null ? comp.address : 'μ£Όμ† μ •λ³΄ μ—†μ'}">μ£Όμ† μ •λ³΄ μ—†μ</span>
                    </div>

                    <div class="company-info-item">
                        <span class="info-icon">π</span>
                        <span class="info-text">
                μ‚¬μ—…μλ“±λ΅λ²νΈ: <span th:text="${comp != null ? comp.businessRegistrationNumber : 'λ―Έλ“±λ΅'}">λ―Έλ“±λ΅</span>
              </span>
                    </div>
                </div>

                <div class="company-badge">
                    <span class="badge-text" th:text="${comp != null && comp.rating != null ? 'ν‰μ  ' + comp.rating : 'μΈμ¦ μ—…μ²΄'}">μΈμ¦ μ—…μ²΄</span>
                </div>
            </div>
        </div>

        <!-- μ—…μ²΄ ν†µκ³„ -->
        <div class="company-stats" style="grid-template-columns: repeat(4, 1fr);">
            <div class="stat-item">
                <div class="stat-number"
                     th:text="${stats != null ? stats.totalOrders : 0}">0</div>
                <div class="stat-label">μ΄ μ£Όλ¬Έκ±΄</div>
            </div>
            <div class="stat-item">
                <div class="stat-number"
                     th:text="${stats != null ? stats.completedDeliveries : 0}">0</div>
                <div class="stat-label">λ°°μ†΅μ™„λ£</div>
            </div>
            <div class="stat-item">
                <div class="stat-number"
                     th:text="${stats != null ? stats.pendingOrders : 0}">0</div>
                <div class="stat-label">λ€κΈ°μ¤‘</div>
            </div>
            <div class="stat-item">
                <div class="stat-number"
                     th:text="${stats != null ? stats.rating : 0.0}">0.0</div>
                <div class="stat-label">ν‰μ </div>
            </div>
        </div>


        <!-- κΈ°λ¥ λ¨λ“ -->
        <div class="modules-grid">
            <div class="module-item" data-module="orders" tabindex="0" role="button" aria-label="κ³ κ° μ£Όλ¬Έκ±΄">
                <div class="module-icon"><span class="icon">π“‹</span></div>
                <h3 class="module-title">κ³ κ° μ£Όλ¬Έκ±΄</h3>
                <p class="module-description">κ³ κ°λ“¤μ μ£Όλ¬Έ λ‚΄μ—­μ„ ν™•μΈν•κ³  μ£Όλ¬Έ μƒνƒλ¥Ό κ΄€λ¦¬ν•  μ μμµλ‹λ‹¤.</p>
            </div>

            <div class="module-item" data-module="delivery" tabindex="0" role="button" aria-label="λ°°μ†΅κ±΄">
                <div class="module-icon"><span class="icon">π</span></div>
                <h3 class="module-title">λ°°μ†΅κ±΄</h3>
                <p class="module-description">λ°°μ†΅ ν„ν™©μ„ ν™•μΈν•κ³  λ°°μ†΅ μƒνƒλ¥Ό μ—…λ°μ΄νΈν•  μ μμµλ‹λ‹¤.</p>
            </div>

            <div class="module-item" data-module="refund" tabindex="0" role="button" aria-label="ν™λ¶μ²λ¦¬">
                <div class="module-icon"><span class="icon">π’Έ</span></div>
                <h3 class="module-title">ν™λ¶μ²λ¦¬</h3>
                <p class="module-description">κ³ κ°μ ν™λ¶ μ”μ²­μ„ ν™•μΈν•κ³  ν™λ¶ μ²λ¦¬λ¥Ό μ§„ν–‰ν•  μ μμµλ‹λ‹¤.</p>
            </div>

            <div class="module-item" data-module="products" tabindex="0" role="button" aria-label="μƒν’κ΄€λ¦¬">
                <div class="module-icon"><span class="icon">πΎ</span></div>
                <h3 class="module-title">μƒν’κ΄€λ¦¬</h3>
                <p class="module-description">νλ§¤ μƒν’μ„ λ“±λ΅ν•κ³  μ¬κ³ , κ°€κ²© λ“±μ„ κ΄€λ¦¬ν•  μ μμµλ‹λ‹¤.</p>
            </div>

            <div class="module-item" data-module="reviews" tabindex="0" role="button" aria-label="λ¦¬λ·°κ΄€λ¦¬">
                <div class="module-icon"><span class="icon">β­</span></div>
                <h3 class="module-title">λ¦¬λ·°κ΄€λ¦¬</h3>
                <p class="module-description">νλ§¤ν• μƒν’μ— λ€ν• λ¦¬λ·°λ¥Ό κ΄€λ¦¬ν•κ³  λ‹¤λ¥Έ κ³ κ°λ“¤μ κ²½ν—μ„ ν™•μΈν•  μ μμµλ‹λ‹¤.</p>
            </div>

            <div class="module-item" data-module="company-edit" tabindex="0" role="button" aria-label="μ—…μ²΄μ •λ³΄μμ •">
                <div class="module-icon"><span class="icon">πΆ</span></div>
                <h3 class="module-title">μ—…μ²΄μ •λ³΄μμ •</h3>
                <p class="module-description">λ†μ¥ μ •λ³΄, μ—°λ½μ², μ£Όμ† λ“± μ—…μ²΄ μ •λ³΄λ¥Ό μμ •ν•  μ μμµλ‹λ‹¤.</p>
            </div>

            <!-- λ μ‹ν”Ό κ΄€λ¦¬ λ¨λ“ (company_id = 3μΈ νμ‚¬μ—κ²λ§ ν‘μ‹) -->
            <div th:if="${comp != null && comp.companyId != null && comp.companyId == 3}" class="module-item" data-module="recipe-management" tabindex="0" role="button" aria-label="λ μ‹ν”Όκ΄€λ¦¬">
                <div class="module-icon"><span class="icon">π³</span></div>
                <h3 class="module-title">λ μ‹ν”Όκ΄€λ¦¬</h3>
                <p class="module-description">λ μ‹ν”Όλ¥Ό μΉμΈ, κ±°λ¶€, κ²μ‹, μ‚­μ ν•  μ μλ” κ΄€λ¦¬μ κΈ°λ¥μ…λ‹λ‹¤.</p>
            </div>

            <!-- μ—…μ²΄ λ΅κ·ΈμΈ μ‚¬μ©μμ—κ²λ§ ν‘μ‹λλ” μ•λ¦Ό λ©”μΌ μ „μ†΅ λ²„νΌ -->
            <div th:if="${currentCompany != null}" class="module-item" data-module="email-notification" tabindex="0" role="button" aria-label="μ•λ¦Ό λ©”μΌ μ „μ†΅">
                <div class="module-icon"><span class="icon">π“§</span></div>
                <h3 class="module-title">μ•λ¦Ό λ©”μΌ μ „μ†΅</h3>
                <p class="module-description">SMS λ™μν• κ³ κ°λ“¤μ—κ² νΉλ³„ ν• μΈμ΄λ‚ μ‹ μƒν’ μ•λ¦Ό λ©”μΌμ„ λ°μ†΅ν•  μ μμµλ‹λ‹¤.</p>
            </div>
        </div>
    </div>
</section>

<!-- μ΄λ©”μΌ λ°μ†΅ λ¨λ‹¬ -->
<div id="emailModal" class="email-modal" style="display: none;">
    <div class="modal-content">
        <div class="modal-header">
            <h3>π“§ μ•λ¦Ό λ©”μΌ μ „μ†΅</h3>
            <button class="modal-close" onclick="closeEmailModal()">&times;</button>
        </div>
        <div class="modal-body">
            <div class="recipients-info">
                <p>SMS λ™μν• κ³ κ° <span id="recipientCount">-</span>λ…μ—κ² λ©”μΌμ„ λ°μ†΅ν•©λ‹λ‹¤.</p>
                <button type="button" id="checkRecipientsBtn" class="btn-secondary">μμ‹ μ ν™•μΈ</button>
            </div>

            <form id="emailForm">
                <div class="form-group">
                    <label for="emailSubject">μ λ©</label>
                    <input type="text" id="emailSubject" name="subject" placeholder="λ©”μΌ μ λ©μ„ μ…λ ¥ν•μ„Έμ”" required>
                </div>

                <div class="form-group">
                    <label for="emailMessage">λ‚΄μ©</label>
                    <textarea id="emailMessage" name="message" rows="6" placeholder="λ©”μΌ λ‚΄μ©μ„ μ…λ ¥ν•μ„Έμ”&#10;&#10;" required></textarea>
                </div>

                <div class="form-actions">
                    <button type="button" onclick="closeEmailModal()" class="btn-cancel">μ·¨μ†</button>
                    <button type="submit" class="btn-send">λ©”μΌ λ°μ†΅</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- ν‘Έν„° -->
<div th:replace="~{common/footer :: footer}"></div>

<script th:src="@{/js/mypage_company.js}"></script>


</body>
</html>